!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(t,n){let{item:s,handleCardClick:o}=t;e(this,"_handleLikeButton",(()=>{this._likeButton.classList.toggle("card__like-button_black")})),e(this,"_handleDeleteButton",(()=>{this._element.remove(),this._element=null})),this._cardSelector=n,this._name=s.name,this._link=s.link,this._handleCardClick=o}_getTemplate(){return this._element=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._element}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeButton),this._deleteButton.addEventListener("click",this._handleDeleteButton),this._cardImage.addEventListener("click",this._handleCardClick)}generateCard(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._element.querySelector(".card__name").textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this._setEventListeners(),this._element}}class n{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage}_hideInputError(e){const t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_hasValidInputs(){return this._inputList.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_toggleButton(){this._hasValidInputs()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButton()}))}))}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e),e.value="",this._toggleButton()}))}enableValidation(){this._form.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners()}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor(e){s(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.close()})),s(this,"_handleMouseDown",(e=>{(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close"))&&this.close()})),this._popupElement=e}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._handleMouseDown)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._handleMouseDown)}}class i extends o{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popupElement.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}close(){super.close(),this._form.reset()}setEventListeners(){this._popupElement.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(),this.close()}))}}const r=document.querySelector(".popup_type_profile"),l=document.querySelector(".profile__popup-button"),a=(document.querySelector(".popup__close_type_profile"),document.querySelector(".popup_type_place")),u=document.querySelector(".profile__add-button"),c=(document.querySelector(".popup__close_type_place"),document.querySelector(".profile__name")),p=document.querySelector(".profile__job"),_=document.querySelector(".popup__form_type_profile"),d=_.elements.name,h=_.elements.job,m=(a.querySelector(".popup__input_field_heading"),a.querySelector(".popup__input_field_img"),document.querySelector(".popup__form_type_place")),y=(document.querySelector("#card-template").content,document.querySelector(".cards")),b=document.querySelector(".popup_type_preview"),E=(document.querySelector(".popup__close_type_preview"),document.querySelector(".popup__image"),document.querySelector(".popup__heading"),document.querySelectorAll(".popup"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible",imagePreview:".popup_type_preview"}),v=new class{constructor(e,t){this._name=e,this._job=t}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){this._name.textContent=e.name,this._job.textContent=e.job}}(c,p),S=new i(r,(function(){v.setUserInfo(S.getInputValues())}));S.setEventListeners();const g=new n(E,_);g.enableValidation(),l.addEventListener("click",(()=>{g.resetValidation();const e=v.getUserInfo();d.value=e.name,h.value=e.job,S.open()}));const f=new i(a,(function(){const e=f.getInputValues(),t={name:e.placeHeading,link:e.placeImage};y.prepend(C({item:t})),m.reset()}));f.setEventListeners();const L=new class{constructor(e,t){let{items:n,renderer:s}=e;this._renderer=s,this._container=document.querySelector(t),this._items=n}renderItems(){this._items.forEach((e=>this._renderer(e)))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{L.addItem(C({item:e}))}},".cards");L.renderItems();const k=new n(E,m);function C(e){let{item:n}=e;return new t({item:n,handleCardClick:()=>{q.open({item:n})}},".card-template").generateCard()}k.enableValidation(),u.addEventListener("click",(()=>{k.resetValidation(),f.open()}));const q=new class extends o{constructor(e){super(e),this._image=this._popupElement.querySelector(".popup__image"),this._caption=this._popupElement.querySelector(".popup__heading")}open(e){let{item:t}=e;this._image.src=t.link,this._image.alt="".concat(t.name," photo"),this._caption.textContent=t.name,super.open()}}(b)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNORSxLQUFNLHVEQUVSLENBQ0VGLEtBQU0saUJBQ05FLEtBQU0sMERBRVIsQ0FDRUYsS0FBTSxVQUNORSxLQUFNLG1EQUVSLENBQ0VGLEtBQU0sd0JBQ05FLEtBQU0sbURBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSxpRENLTitHLFNBQVczSCxJQUNUd0gsRUFBU1EsUUFBUVQsRUFBVyxDQUFFdkgsS0FBQUEsT0FHbEMsVUFFRndILEVBQVNPLGNBRVQsTUFBTUcsRUFBZSxJQUFJckcsRUFBY0MsRUFBVXlFLEdBR2pELFNBQVNnQixFQUFULEdBQThCLElBQVYsS0FBRXZILEdBQVEsRUFXNUIsT0FWYSxJQUFJSCxFQUNmLENBQ0VHLEtBQUFBLEVBQ0FDLGdCQUFpQixLQUNma0ksRUFBV3JELEtBQUssQ0FBRTlFLEtBQUFBLE1BR3RCLGtCQUV1QnlCLGVBWjNCeUcsRUFBYS9ELG1CQWdCYjRCLEVBQWUzRSxpQkFBaUIsU0FBUyxLQUN2QzhHLEVBQWFqRSxrQkFDYmlELEVBQWlCcEMsVUFJbkIsTUFBTXFELEVBQWEsSUduR0osY0FBNkI3RCxFQUMxQ3hFLFlBQVlxRixHQUNWRSxNQUFNRixHQUNOakYsS0FBS2tJLE9BQVNsSSxLQUFLMkUsY0FBYzdELGNBQWMsaUJBQy9DZCxLQUFLbUksU0FBV25JLEtBQUsyRSxjQUFjN0QsY0FBYyxtQkFFbkQ4RCxLQUFLLEdBQVUsSUFBVixLQUFFOUUsR0FBUSxFQUNiRSxLQUFLa0ksT0FBT3pHLElBQU0zQixFQUFLWSxLQUN2QlYsS0FBS2tJLE9BQU94RyxJQUFaLFVBQXFCNUIsRUFBS1UsS0FBMUIsVUFDQVIsS0FBS21JLFNBQVMzRyxZQUFjMUIsRUFBS1UsS0FDakMyRSxNQUFNUCxTSHlGNEIyQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW0sIGhhbmRsZUNhcmRDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgIHRoaXMuX25hbWUgPSBpdGVtLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gaXRlbS5saW5rO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbiAgX2hhbmRsZUxpa2VCdXR0b24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9ibGFja1wiKTtcclxuICB9O1xyXG4gIF9oYW5kbGVEZWxldGVCdXR0b24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUJ1dHRvbik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XHJcbiAgfVxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX25hbWVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yU3BhbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yU3Bhbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JTcGFuLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JTcGFuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JTcGFuLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvclNwYW4udGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2hhc1ZhbGlkSW5wdXRzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmIChpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXRzKCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICB0aGlzLl90b2dnbGVCdXR0b24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xyXG4gIH1cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuICBfaGFuZGxlTW91c2VEb3duID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKFxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX29wZW5lZFwiKSB8fFxyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKVxyXG4gICAgKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVNb3VzZURvd24pO1xyXG4gIH1cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlTW91c2VEb3duKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2lucHV0XCIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCIvL3BvcHVwIG9wZW4gJiBjbG9zZSByZWFsdGVkXHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX3Byb2ZpbGVcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX3BvcHVwLWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnBvcHVwX19jbG9zZV90eXBlX3Byb2ZpbGVcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgYWRkUGxhY2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9wbGFjZVwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZFBsYWNlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgY2xvc2VBZGRQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2Nsb3NlX3R5cGVfcGxhY2VcIlxyXG4pO1xyXG5cclxuLy90ZXh0IGNvbnRlbnQgc3VibWl0aW9uIHJlbGF0ZWRcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fam9iXCIpO1xyXG4vL2NvbnN0IHN1Ym1pdENhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b25fdHlwZV9wbGFjZVwiKTtcclxuXHJcbi8vZm9ybXNcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX3Byb2ZpbGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybU5hbWVJbnB1dCA9IHByb2ZpbGVGb3JtLmVsZW1lbnRzLm5hbWU7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRm9ybUpvYklucHV0ID0gcHJvZmlsZUZvcm0uZWxlbWVudHMuam9iO1xyXG5leHBvcnQgY29uc3QgY2FyZFRpdGxlSW5wdXQgPSBhZGRQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2lucHV0X2ZpZWxkX2hlYWRpbmdcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgY2FyZEltYWdlSW5wdXQgPSBhZGRQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2lucHV0X2ZpZWxkX2ltZ1wiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9wbGFjZVwiKTtcclxuXHJcbi8vY2FyZHNcclxuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5leHBvcnQgY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIik7XHJcbmV4cG9ydCBjb25zdCBpbWFnZVByZXZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX3R5cGVfcHJldmlld1wiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2Nsb3NlX3R5cGVfcHJldmlld1wiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBjYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRIZWFkaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faGVhZGluZ1wiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBcIik7XHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIucG9wdXBfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcclxuICBpbWFnZVByZXZpZXc6IFwiLnBvcHVwX3R5cGVfcHJldmlld1wiLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IHtcclxuICBzZXR0aW5ncyxcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgcG9wdXBQcm9maWxlRm9ybSxcclxuICBwb3B1cFByb2ZpbGVCdXR0b24sXHJcbiAgYWRkUGxhY2VCdXR0b24sXHJcbiAgcHJvZmlsZUpvYixcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlRm9ybUpvYklucHV0LFxyXG4gIHByb2ZpbGVGb3JtTmFtZUlucHV0LFxyXG4gIGNhcmRDb250YWluZXIsXHJcbiAgY2FyZEZvcm0sXHJcbiAgcHJvZmlsZUZvcm0sXHJcbiAgYWRkUGxhY2VQb3B1cCxcclxuICBpbWFnZVByZXZpZXcsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vcHJvZmlsZS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUpvYik7XHJcblxyXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgcG9wdXBQcm9maWxlRm9ybSxcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdFxyXG4pO1xyXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCgpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhwb3B1cEVkaXRQcm9maWxlLmdldElucHV0VmFsdWVzKCkpO1xyXG59XHJcblxyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUZvcm0pO1xyXG5wb3B1cFByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxucG9wdXBQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlLnJlc2V0VmFsaWRhdGlvbigpO1xyXG5cclxuICBjb25zdCB1c2VyTmV3SW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZUZvcm1OYW1lSW5wdXQudmFsdWUgPSB1c2VyTmV3SW5mby5uYW1lO1xyXG4gIHByb2ZpbGVGb3JtSm9iSW5wdXQudmFsdWUgPSB1c2VyTmV3SW5mby5qb2I7XHJcbiAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vY2FyZC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuY29uc3QgcG9wdXBBZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIGFkZFBsYWNlUG9wdXAsXHJcbiAgaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXRcclxuKTtcclxucG9wdXBBZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoKSB7XHJcbiAgY29uc3QgbmV3VmFsdWVzID0gcG9wdXBBZGRDYXJkRm9ybS5nZXRJbnB1dFZhbHVlcygpO1xyXG4gIGNvbnN0IGl0ZW0gPSB7XHJcbiAgICBuYW1lOiBuZXdWYWx1ZXMucGxhY2VIZWFkaW5nLFxyXG4gICAgbGluazogbmV3VmFsdWVzLnBsYWNlSW1hZ2UsXHJcbiAgfTtcclxuICBjYXJkQ29udGFpbmVyLnByZXBlbmQoY3JlYXRlQ2FyZCh7IGl0ZW0gfSkpO1xyXG4gIGNhcmRGb3JtLnJlc2V0KCk7XHJcbn1cclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoeyBpdGVtIH0pKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5jYXJkc1wiXHJcbik7XHJcbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgY2FyZEZvcm0pO1xyXG5wb3B1cEFkZENhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZCh7IGl0ZW0gfSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIHtcclxuICAgICAgaXRlbSxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgcG9wdXBJbWFnZS5vcGVuKHsgaXRlbSB9KTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBcIi5jYXJkLXRlbXBsYXRlXCJcclxuICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmFkZFBsYWNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBBZGRDYXJkLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHBvcHVwQWRkQ2FyZEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vaW1hZ2UvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKGltYWdlUHJldmlldyk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcihwcm9maWxlTmFtZSwgcHJvZmlsZUluZm8pIHtcclxuICAgIHRoaXMuX25hbWUgPSBwcm9maWxlTmFtZTtcclxuICAgIHRoaXMuX2pvYiA9IHByb2ZpbGVJbmZvO1xyXG4gIH1cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBkYXRhLmpvYjtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcHRpb24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faGVhZGluZ1wiKTtcclxuICB9XHJcbiAgb3Blbih7IGl0ZW0gfSkge1xyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gaXRlbS5saW5rO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gYCR7aXRlbS5uYW1lfSBwaG90b2A7XHJcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gaXRlbS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiY2FyZFNlbGVjdG9yIiwiaXRlbSIsImhhbmRsZUNhcmRDbGljayIsInRoaXMiLCJfbGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9lbGVtZW50IiwicmVtb3ZlIiwiX2NhcmRTZWxlY3RvciIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVCdXR0b24iLCJfY2FyZEltYWdlIiwiZ2VuZXJhdGVDYXJkIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yU3BhbiIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfaGFzVmFsaWRJbnB1dHMiLCJfaW5wdXRMaXN0Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvbiIsIl9idXR0b25FbGVtZW50IiwiZGlzYWJsZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInJlc2V0VmFsaWRhdGlvbiIsInZhbHVlIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwRWxlbWVudCIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVNb3VzZURvd24iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoRm9ybSIsInBvcHVwU2VsZWN0b3IiLCJoYW5kbGVTdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJnZXRJbnB1dFZhbHVlcyIsImRhdGEiLCJpbnB1dCIsInJlc2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cFByb2ZpbGVGb3JtIiwicG9wdXBQcm9maWxlQnV0dG9uIiwiYWRkUGxhY2VQb3B1cCIsImFkZFBsYWNlQnV0dG9uIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwicHJvZmlsZUZvcm0iLCJwcm9maWxlRm9ybU5hbWVJbnB1dCIsImVsZW1lbnRzIiwicHJvZmlsZUZvcm1Kb2JJbnB1dCIsImpvYiIsImNhcmRGb3JtIiwiY2FyZENvbnRhaW5lciIsImltYWdlUHJldmlldyIsInVzZXJJbmZvIiwicHJvZmlsZUluZm8iLCJfam9iIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cFByb2ZpbGUiLCJ1c2VyTmV3SW5mbyIsInBvcHVwQWRkQ2FyZEZvcm0iLCJuZXdWYWx1ZXMiLCJwbGFjZUhlYWRpbmciLCJwbGFjZUltYWdlIiwicHJlcGVuZCIsImNyZWF0ZUNhcmQiLCJjYXJkTGlzdCIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJfaXRlbXMiLCJyZW5kZXJJdGVtcyIsImFkZEl0ZW0iLCJlbGVtZW50IiwicG9wdXBBZGRDYXJkIiwicG9wdXBJbWFnZSIsIl9pbWFnZSIsIl9jYXB0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==